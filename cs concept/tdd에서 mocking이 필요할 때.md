- update : 2023-10-04

## TDD에서 모킹이 필요할 때

나는 모킹에 대한 개념을 이해는 했지만, 언제 쓰는지 몰르고 그냥 좋은 건줄 알고, 모든 테스트를 모킹으로 했었다.

그러니 모든 타당성이 맞을 수 밖에없었고, 테스트가 무의미하다는 걸 느꼈다.

> 1을 대답하는 모킹 함수를 만들고 그 함수를 테스트해서, 1이 나오는지 판단하는건 매우 바보같은 짓이다.

모킹이라는 개념은 한 함수를 테스트하고 싶을 때, 의존성이나 외부 모듈, DB 등 때문에 독립적으로 테스트를 수행시키기 어려운 경우
나머지 외부 요소를 목적에 따라 맞고 아님에 대한 결과로만 나오게 모킹을 만들고 메인 함수를 테스트할 때 쓰여야한다.

## 그럼 보통은 어떻게 TEST해야하지?

그냥 모듈을 들고와서 동작시키는건 매우 좋지않다고 생각했다. 하지만, 원래 의존성이 없을 때는 그냥 들고와서 하는 것이 맞다.
점점 여러 관계가 복잡하고 의존성의 역전을 지속적으로 하더라도 의존성이 아예 부여되지않을 수는 없다.

예시로 사용자 객체가 있고 이는 DB를 건들여야 하기 때문에 어떠한 경우라도 DB 내에 원치않은 참조가 이루워진다.
이러한 사항을 막기 위해서 모킹으로 DB 객체를 대체하고 그럼으로써, 테스트를 정상적으로 수행 할 수 있게 된다.
