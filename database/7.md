# 관계형 데이터베이스

## 관계형 데이터 모델

관계형 데이터 모델은 1970년 IBM 연구소에 근무하던 E. F. Codd에 의해 처음 제안된 것으로, 내부적으로 관계에 대한 이산수학 개념을 기초로 하고있다.

| 학번     | 성명   | 학과   |
| -------- | ------ | ------ |
| 20181234 | 김철수 | 컴퓨터 |
| 20182587 | 이영자 | 경영   |
| 20183654 | 고영준 | 전자   |

> 이 테이블을 관계형 데이터 모델에서는 이 테이블을 릴레이션이라 한다.

- 테이블의 열(필드) 는 "attribute"라고 한다.

  - attribute는 데이터 모델에서 데이터의 가장 작은 논리적 단위인 "20181234", "김철수" 등은 어트리뷰트의 값이다.
    > 더 이상 분해할 수 없는 **원자값**이라고 한다.

- 테이블의 행(레코드) 는 "tuple"이라고 한다.

  > 인스턴스라고 생각하면 좀 편하다.

- 보편적인 no 와 name 이라는 이름 대신에 STUDENT라면, 그 첫 글자를 따서 s_no, s_name등으로 표현하여 유일성을 보장한다.

## 릴레이션의 개념

릴레이션 R(테이블)의 스키마는 릴레이션 이름 R과 일정 수의 애트리뷰트 A1,A2, ..., An 의 집합으로 구성되며 R(A1,A2, ..., An)으로 표기된다.

- 각 애트리뷰트 Ai(i=1~n)은 도메인 Di(i=1~n)과 1대1 대응된다.

  > 도메인은 DB 데이터의 TYPE이라고 생각하면 편하다.
  > 그리고 한 테이블 내에 겹치는 도메인을 넣을 수 있다.

- **차수**는 Attribute의 개수이다.
  > 위 테이블에서는 Attribute는 3이다.
- **카디널리티** Tuple의 수이다.
  > 위 테이블에서는 Tuple은 3이다.

## 릴레이션의 특성

1.  Tuple의 유일성(uniqueness)
    > 릴레이션의 튜플은 모두 unique하다.
2.  Tuple의 무순서성(no ordering)
    > {a,b,c}와 {b,c,a}가 다르지않다. 즉 순서가 없다.
3.  Attribute의 무순서성(no ordering)
    > Attribute 또한 학번 과 이름중 어느것이 먼저와도 상관없다.
4.  Attribute의 원자성(atomicity)
    > 더이상 분리할 수 없는 원자값이어야한다.
    > 반복그룹 즉, 집합이 될 수 없다.

- 반복 그룹은 DBMS 에서는 허용되지않는다.

- 허용하지않는 것을 정규화 릴레이션이라고 한다.

- 허용하는 것을 비정규 릴레이션이라고 한다.

> 비정규에서 정규로 변환하는 과정을 정규화라고한다.

## 데이터베이스의 키

릴레이션의 특성 중 튜블의 유일성으로 인해 한 릴레이션에 포함된 투플들은 모두 상이하다.

> 따라서 그 릴레이션을 구성하는 모든 애트리뷰트를 사용하면 각 튜플을 고유하게 식별할 수 있다.

- 튜블을 구유하게 구분할 수 있는 애트리뷰트의 집합을 키라고한다.

- 후보키와 기본키

  - 후보키의 특징

    - 유일성(uniqueness)
      > 후보키만 비교하더라도, 튜플을 유일하게 표현할 수 있어야한다.
    - 최소성(minimality)

      > 유일하게 식별하는데 꼭 필요한 최소한의 어트리뷰트의 집합으로 구성되어있어햐한다.

      > 하나라도 속성을 제거하면 유일하게 식별할 수 있는 능력을 상실해야한다.

    > 최소성을 거쳐서 집합내에 2개이상의 후보키가 생기게 되면, 1개를 기본키(primary key)라 지정하면 나머지는 대체키가 되게 된다.

  - 유일성은 만족하지만, 최소성을 만족하지않는 키를 슈퍼 키라고한다. (그냥 키의 개념)

- 외래키

  외래키는 관계 릴레이션에서 개체들 간의 관계를 표현하는데 중요한 역할을 수행

  - 다른 릴레이션의 기본키(primary key)를 참조하는 외래키

    > 외부의 entity를 참조, 다른 키에 외부 entity내의 속성을 참조

  - 자체 릴레이션의 기본키를 참조하는 외래키
    > 자신을 참조하는 형태? 재귀적으로 entity 참조

## 무결성 제약조건(integrity constraint condition)

- 개체 무결성 제약조건 (entity integrity constraint)

  기본키에 속해있는 애트리뷰트는 널(NULL) 값이나 중복 값을 가질 수 없다는 것을 말한다.

  > 만일 DBMS에서 어떤 애트리뷰트를 기본키를 설정해 놓으면 이 애트리뷰트에는 반드시 유일한 키값이 들어있어야한다.

  > 기본 키값이 넣값으로 되어 있어서 개체 무결성 제약 조건에 위배된다는 메세지를 볼 수있다.

- 참조 무결성 제약조건 (referential integrity constraint)

  릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 것을 말한다. 참조 무결성 제약은 DBMS 작업 중 종종 볼 수 있는 에러이다.

  ```txt
  학번이 20207779인 튜플이 있다고 생각하자.

  이는 학생 릴레이션에는 없으므로 외래키가 될 수 없다.

  이같은 경우를 참조 무결성을 위배했다고 말한다.

  --> DB가 삽입, 삭제, 변경 등의 연산을 통해 데이터가 변경될 때 참조 무결성 제약조건이 항상 유지되도록 해야한다.
  >> CASCADE의 기능이 그 예시다.

  1번 테이블에서 'A'고객의 정보를 수정하면
  2번 테이블에서도 수정된 정보가 연관되어 있다면 update되어야한다.
  ```
